# 节点服务器配置文件模板
# 配置分布式推理引擎的各个节点信息
# 使用时请复制此文件到 config/nodes.yaml 并修改为实际配置

nodes:
  # 节点1 - 主节点
  node1:
    host: "192.168.1.100"           # 替换为实际主机IP
    username: "root"                # 替换为实际用户名
    password: "${NODE1_PASSWORD}"   # 设置环境变量或直接填写密码
    # key_filename: "/path/to/ssh/key"  # SSH密钥文件路径（可选）
    port: 22                        # SSH端口
    tags: ["inference", "primary"]
    role: "master"
    enabled: true
    
    # 节点特定配置
    docker_compose_path: "/opt/inference"    # Docker Compose工作目录
    work_dir: "/opt/inference"               # 工作目录
    
  # 节点2 - 工作节点
  node2:
    host: "192.168.1.101"           # 替换为实际主机IP
    username: "root"                # 替换为实际用户名
    password: "${NODE2_PASSWORD}"   # 设置环境变量或直接填写密码
    port: 22
    tags: ["inference", "worker"]
    role: "worker"
    enabled: false                  # 默认禁用，按需启用
    
    docker_compose_path: "/opt/inference"
    work_dir: "/opt/inference"
    
  # 节点3 - 工作节点
  node3:
    host: "192.168.1.102"           # 替换为实际主机IP
    username: "root"                # 替换为实际用户名
    password: "${NODE3_PASSWORD}"   # 设置环境变量或直接填写密码
    port: 22
    tags: ["inference", "worker"]
    role: "worker"
    enabled: false                  # 默认禁用，按需启用
    
    docker_compose_path: "/opt/inference"
    work_dir: "/opt/inference"
    
  # 节点4 - 备用节点（默认禁用）
  node4:
    host: "192.168.1.103"           # 替换为实际主机IP
    username: "root"                # 替换为实际用户名
    password: "${NODE4_PASSWORD}"   # 设置环境变量或直接填写密码
    port: 22
    tags: ["inference", "backup"]
    role: "worker"
    enabled: false                  # 默认不启用

    docker_compose_path: "/opt/inference"
    work_dir: "/opt/inference"


# ===== Kubernetes集群配置 (NEW) =====
# K8S集群通过SSH连接到集群的一个节点执行kubectl命令
# 这与Docker Compose节点的操作模式保持一致

kubernetes:
  # K8S生产集群
  k8s_prod:
    # SSH连接信息 (连接到K8S集群的master节点或有kubectl权限的节点)
    host: "192.168.1.200"             # K8S master节点IP
    username: "k8s-admin"             # 替换为实际用户名
    password: "${K8S_PROD_PASSWORD}"  # 设置环境变量或直接填写密码
    # key_filename: "/path/to/ssh/key"  # SSH密钥文件路径（可选）
    port: 22

    # kubectl工作目录 (用于存放上传的manifest文件)
    kubectl_work_dir: "/opt/k8s-manifests"

    # kubectl配置 (可选，默认使用节点上的默认配置)
    # kubeconfig: "/etc/kubernetes/admin.conf"
    # context: "default"

    # 默认命名空间
    default_namespace: "default"

    tags: ["kubernetes", "production"]
    enabled: false                    # 默认禁用，按需启用

  # K8S测试集群
  k8s_test:
    host: "10.0.0.50"                 # K8S测试集群节点IP
    username: "devops"
    password: "${K8S_TEST_PASSWORD}"
    port: 22

    kubectl_work_dir: "/home/devops/k8s-manifests"
    default_namespace: "testing"

    tags: ["kubernetes", "testing"]
    enabled: false                    # 默认禁用，按需启用


# 环境变量设置说明
# 请在系统中设置以下环境变量，或在.env文件中配置：
#
# Docker节点密码:
# export NODE1_PASSWORD="your_node1_password"
# export NODE2_PASSWORD="your_node2_password"
# export NODE3_PASSWORD="your_node3_password"
# export NODE4_PASSWORD="your_node4_password"
#
# K8S集群节点密码:
# export K8S_PROD_PASSWORD="your_k8s_prod_password"
# export K8S_TEST_PASSWORD="your_k8s_test_password"